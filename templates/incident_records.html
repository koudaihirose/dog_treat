{% extends 'base.html' %}

{% block content %}
    <form method="POST" action="{{ url_for('add_incident_record') }}" enctype="multipart/form-data">
        <label for="incident_time">発生時刻:</label>
        <input type="datetime-local" name="incident_time" id="incident_time" required>

        <label for="note">メモ:</label>
        <textarea name="note" id="note"></textarea>

        <label for="photos">写真（最大3枚）:</label>
        <input type="file" name="photos" id="photos" multiple>

        <button type="submit">記録を追加</button>
    </form>
    <table>
        <thead>
            <tr>
                <th>発生時刻</th>
                <th>メモ</th>
                <th>写真</th>
            </tr>
        </thead>
        <tbody>
            {% for record in incident_records %}
            <tr>
                <td>{{ record.incident_time }}</td>
                <td>{{ record.note }}</td>
                <td>
                    {% if record.photos %}
                        {% for photo in record.photos.split(', ') %}
                            <img src="{{ url_for('static', filename=photo)}}" alt="Incident Photo" style="max-width: 100px;">
                        {% endfor %}
                    {% else %}
                        なし
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}